<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang="en" class="supernova ">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="HandheldFriendly" content="true" />
    <title>Independent Contractor Registration Form</title>
    <link type="text/css" rel="stylesheet"
        href="https://cdn01.jotfor.ms/stylebuilder/static/form-common.css?v=73932fc
" />
    <style type="text/css">
        @media print {
            * {
                -webkit-print-color-adjust: exact !important;
                color-adjust: exact !important;
            }

            .form-section {
                display: inline !important
            }

            .form-pagebreak {
                display: none !important
            }

            .form-section-closed {
                height: auto !important
            }

            .page-section {
                position: initial !important
            }
        }
    </style>
    <link type="text/css" rel="stylesheet"
        href="https://cdn02.jotfor.ms/themes/CSS/5e6b428acc8c4e222d1beb91.css?v=3.3.54751" />
    <link type="text/css" rel="stylesheet"
        href="https://cdn03.jotfor.ms/css/styles/payment/payment_styles.css?3.3.54751" />
    <link type="text/css" rel="stylesheet"
        href="https://cdn01.jotfor.ms/css/styles/payment/payment_feature.css?3.3.54751" />
    <style type="text/css" id="form-designer-style">
        /* Injected CSS Code */

        /* Begining of advanced designer */

        /*PREFERENCES STYLE*/

        /*  1 - Preferences style */

        /*  1 - FONT FAMILY */

        .form-all {
            font-family: "Inter", sans-serif;
        }

        /* 2 - FORM WIDTH */

        .form-all {
            max-width: 752px;
        }

        /* 5 - FONT SIZE */

        .form-all {
            font-size: 16px;
        }

        /* 5 - input bg color */

        .form-textbox,
        .form-textarea,
        .form-radio-other-input,
        .form-checkbox-other-input,
        .form-captcha input,
        .form-spinner input {
            background-color: #ffffff;
        }

        /* 10 - LINE SPACING */

        .form-line {
            margin-top: 12px;
            margin-bottom: 12px;
            padding-top: 0;
            padding-bottom: 0;
        }

        .supernova .form-all,
        .form-all {
            background-color: #ffffff;
        }

        .supernova {
            background-color: #4c72fb;
        }

        .supernova body {
            background-color: transparent;
        }

        .form-all,
        .form-label-top,
        .form-label-left,
        .form-label-right,
        .form-html,
        .form-checkbox-item label,
        .form-radio-item label,
        span.FITB .qb-checkbox-label,
        span.FITB .qb-radiobox-label,
        span.FITB .form-radio label,
        span.FITB .form-checkbox label,
        [data-blotid][data-type=checkbox] [data-labelid],
        [data-blotid][data-type=radiobox] [data-labelid],
        span.FITB-inptCont[data-type=checkbox] label,
        span.FITB-inptCont[data-type=radiobox] label,
        .form-sub-label {
            color: #000000;
        }

        .form-all {
            margin: 72px auto;
        }

        .form-all:before {
            content: none;
        }

        /*PREFERENCES STYLE*/

        /* 17 - INPUT WIDTHS */

        /*  20 - FORM PADDING */

        ul.form-section {
            padding: 0px 38px;
        }

        /* Heights */

        /* 11 - LINE PADDING */

        /* LABEL STYLE */

        /* 12 - ROUNDED INPUTS */

        .form-textbox:not(#productSearch-input),
        .form-radio-other-input,
        .form-checkbox-other-input,
        .form-captcha input,
        .form-spinner input,
        .form-pagebreak-back,
        .form-pagebreak-next,
        .qq-upload-button,
        .signature-wrapper,
        .form-error-message {
            border-radius: 0px;
        }

        .form-textarea {
            border-radius: 0px;
        }

        .supernova .form-all,
        .form-all {
            border-radius: 20px;
        }

        .form-section:first-child {
            border-radius: 20px 20px 0 0;
        }

        .form-section:last-child {
            border-radius: 0 0 20px 20px;
        }

        .form-radio-item,
        .form-checkbox-item {
            padding-bottom: 0px;
        }

        .form-radio-item:last-child,
        .form-checkbox-item:last-child {
            padding-bottom: 0;
        }

        .form-single-column .form-checkbox-item,
        .form-single-column .form-radio-item {
            width: 100%;
        }

        .form-checkbox-item .editor-container div,
        .form-radio-item .editor-container div {
            position: relative;
        }

        .form-checkbox-item .editor-container div:before,
        .form-radio-item .editor-container div:before {
            display: inline-block;
            vertical-align: middle;
            left: 0;
            width: 20px;
            height: 20px;
        }

        .form-radio-item:not(#foo),
        .form-checkbox-item:not(#foo) {
            position: relative;
        }

        .form-radio-item:not(#foo) .form-radio+span:before,
        .form-checkbox-item:not(#foo) .form-radio+span:before,
        .form-radio-item:not(#foo) .form-radio+span:after,
        .form-checkbox-item:not(#foo) .form-radio+span:after,
        .form-radio-item:not(#foo) .form-radio:checked+span div:after,
        .form-checkbox-item:not(#foo) .form-radio:checked+span div:after,
        .form-radio-item:not(#foo) .form-checkbox+span:before,
        .form-checkbox-item:not(#foo) .form-checkbox+span:before,
        .form-radio-item:not(#foo) .form-checkbox+span:after,
        .form-checkbox-item:not(#foo) .form-checkbox+span:after,
        .form-radio-item:not(#foo) .form-checkbox:checked+span div:after,
        .form-checkbox-item:not(#foo) .form-checkbox:checked+span div:after {
            display: none;
        }

        .form-radio-item:not(#foo) .form-radio+label:after,
        .form-checkbox-item:not(#foo) .form-radio+label:after,
        .form-radio-item:not(#foo) .form-radio+span:after,
        .form-checkbox-item:not(#foo) .form-radio+span:after,
        .form-radio-item:not(#foo) .form-checkbox+label:after,
        .form-checkbox-item:not(#foo) .form-checkbox+label:after,
        .form-radio-item:not(#foo) .form-checkbox+span:after,
        .form-checkbox-item:not(#foo) .form-checkbox+span:after {
            opacity: 1;
            transform: scale(1);
        }

        .form-radio-item:not(#foo) label:after,
        .form-checkbox-item:not(#foo) label:after {
            background-color: #ffffff;
        }

        .form-radio-item:not(#foo) .form-checkbox+label,
        .form-checkbox-item:not(#foo) .form-checkbox+label,
        .form-radio-item:not(#foo) .form-checkbox+span,
        .form-checkbox-item:not(#foo) .form-checkbox+span,
        .form-radio-item:not(#foo) .form-radio+label,
        .form-checkbox-item:not(#foo) .form-radio+label,
        .form-radio-item:not(#foo) .form-radio+span,
        .form-checkbox-item:not(#foo) .form-radio+span {
            padding-left: 50px;
        }

        .form-radio-item:not(#foo) label,
        .form-checkbox-item:not(#foo) label {
            float: left;
        }

        .form-radio-item:not(#foo) label:before,
        .form-checkbox-item:not(#foo) label:before,
        .form-radio-item:not(#foo) .editor-container div:before,
        .form-checkbox-item:not(#foo) .editor-container div:before {
            content: '';
            position: absolute;
            display: inline-block;
            vertical-align: baseline;
            border-radius: 12px;
            top: 0;
            left: 4px;
            width: 36px;
            height: 22px;
            cursor: pointer;
            background: #C3CAD8;
        }

        .form-radio-item:not(#foo) label:after,
        .form-checkbox-item:not(#foo) label:after,
        .form-radio-item:not(#foo) .editor-container div:after,
        .form-checkbox-item:not(#foo) .editor-container div:after {
            content: '';
            position: absolute;
            display: inline-block;
            top: 3px;
            left: 8px;
            width: 15px;
            height: 15px;
            border-radius: 12px;
            -webkit-transition-property: all;
            -moz-transition-property: all;
            -ms-transition-property: all;
            -o-transition-property: all;
            transition-property: all;
            -webkit-transition-duration: 0.2s;
            -moz-transition-duration: 0.2s;
            -ms-transition-duration: 0.2s;
            -o-transition-duration: 0.2s;
            transition-duration: 0.2s;
            -webkit-transition-timing-function: ease;
            -moz-transition-timing-function: ease;
            -ms-transition-timing-function: ease;
            -o-transition-timing-function: ease;
            transition-timing-function: ease;
        }

        .form-radio-item:not(#foo) input:checked+label:before,
        .form-checkbox-item:not(#foo) input:checked+label:before {
            background: #487bff;
        }

        .form-radio-item:not(#foo) input:checked+label:after,
        .form-checkbox-item:not(#foo) input:checked+label:after {
            left: 20px;
        }

        .submit-button {
            font-size: 16px;
            font-weight: normal;
            font-family: inherit;
            border: none;
            border-width: 0px;
            border-style: solid;
            border-color: #3d9ae2;
        }

        .submit-button {
            min-width: 180px;
        }

        li[data-type="control_button"] .form-submit-button {
            color: #e8f6fb;
            background-color: #4c72fb;
            background-image: none;
            box-shadow: none;
            text-shadow: none;
        }

        li[data-type="control_button"] .form-submit-button:hover {
            background-color: #0534dc;
        }

        li[data-type="control_button"] button.jf-form-buttons.form-sacl-button,
        li[data-type="control_button"] button.jf-form-buttons.form-submit-print {
            color: #4c72fb;
            border-color: #4c72fb;
            background-image: none;
            background-color: #fff;
        }

        li[data-type="control_button"] button.jf-form-buttons.form-sacl-button:hover,
        li[data-type="control_button"] button.jf-form-buttons.form-submit-print:hover {
            background-color: #0534dc;
            color: #fff;
        }

        li[data-type="control_button"] button.jf-form-buttons.form-pagebreak-back {
            background-image: none;
            background-color: #0534dc;
            box-shadow: none;
            text-shadow: none;
        }

        li[data-type="control_button"] button.jf-form-buttons.form-pagebreak-back:hover {
            background-color: #0428aa;
            color: #fff;
        }

        .form-submit-button,
        .form-submit-reset,
        .form-submit-print {
            border-radius: 6px;
        }

        .form-all .form-pagebreak-back,
        .form-all .form-pagebreak-next {
            font-family: "Inter", sans-serif;
            font-size: 16px;
            font-weight: normal;
        }

        .form-all .form-pagebreak-back,
        .form-all .form-pagebreak-next {
            min-width: 128px;
        }

        li[data-type="control_image"] div {
            text-align: left;
        }

        li[data-type="control_image"] img {
            border: none;
            border-width: 0px !important;
            border-style: solid !important;
            border-color: false !important;
        }

        .supernova {
            height: 100%;
            background-repeat: no-repeat;
            background-attachment: scroll;
            background-position: center top;
            background-repeat: repeat;
        }

        .supernova {
            background-image: none;
        }

        #stage {
            background-image: none;
        }

        /* | */

        .form-all {
            background-repeat: no-repeat;
            background-attachment: scroll;
            background-position: center top;
            background-repeat: repeat;
        }

        .form-header-group {
            background-repeat: no-repeat;
            background-attachment: scroll;
            background-position: center top;
        }

        .header-large h1.form-header {
            font-size: 2em;
        }

        .header-large h2.form-header {
            font-size: 1.5em;
        }

        .header-large h3.form-header {
            font-size: 1.17em;
        }

        .header-large h1+.form-subHeader {
            font-size: 1em;
        }

        .header-large h2+.form-subHeader {
            font-size: .875em;
        }

        .header-large h3+.form-subHeader {
            font-size: .75em;
        }

        .header-default h1.form-header {
            font-size: 2em;
        }

        .header-default h2.form-header {
            font-size: 1.5em;
        }

        .header-default h3.form-header {
            font-size: 1.17em;
        }

        .header-default h1+.form-subHeader {
            font-size: 1em;
        }

        .header-default h2+.form-subHeader {
            font-size: .875em;
        }

        .header-default h3+.form-subHeader {
            font-size: .75em;
        }

        .header-small h1.form-header {
            font-size: 2em;
        }

        .header-small h2.form-header {
            font-size: 1.5em;
        }

        .header-small h3.form-header {
            font-size: 1.17em;
        }

        .header-small h1+.form-subHeader {
            font-size: 1em;
        }

        .header-small h2+.form-subHeader {
            font-size: .875em;
        }

        .header-small h3+.form-subHeader {
            font-size: .75em;
        }

        .form-header-group {
            text-align: left;
        }

        .form-header-group {
            font-family: "false", sans-serif;
        }

        div.form-header-group.header-large,
        div.form-header-group.hasImage {
            margin: 0px -38px;
        }

        div.form-header-group.header-large,
        div.form-header-group.hasImage {
            padding: 40px 52px;
        }

        .form-header-group .form-header,
        .form-header-group .form-subHeader {
            color: -1;
        }

        .form-line-error {
            -webkit-transition-property: none;
            -moz-transition-property: none;
            -ms-transition-property: none;
            -o-transition-property: none;
            transition-property: none;
            -webkit-transition-duration: 0.3s;
            -moz-transition-duration: 0.3s;
            -ms-transition-duration: 0.3s;
            -o-transition-duration: 0.3s;
            transition-duration: 0.3s;
            -webkit-transition-timing-function: ease;
            -moz-transition-timing-function: ease;
            -ms-transition-timing-function: ease;
            -o-transition-timing-function: ease;
            transition-timing-function: ease;
            background-color: #fff4f4;
        }

        .form-line-error .form-error-message {
            background-color: #f23a3c;
            clear: both;
            float: none;
        }

        .form-line-error .form-error-message .form-error-arrow {
            border-bottom-color: #f23a3c;
        }

        .form-line-error input:not(#coupon-input),
        .form-line-error textarea,
        .form-line-error .form-validation-error {
            border: 1px solid #f23a3c;
            box-shadow: 0 0 3px #f23a3c;
        }

        .form-line-error {
            -webkit-transition-property: none;
            -moz-transition-property: none;
            -ms-transition-property: none;
            -o-transition-property: none;
            transition-property: none;
            -webkit-transition-duration: 0.3s;
            -moz-transition-duration: 0.3s;
            -ms-transition-duration: 0.3s;
            -o-transition-duration: 0.3s;
            transition-duration: 0.3s;
            -webkit-transition-timing-function: ease;
            -moz-transition-timing-function: ease;
            -ms-transition-timing-function: ease;
            -o-transition-timing-function: ease;
            transition-timing-function: ease;
            background-color: #fff4f4;
        }

        .form-line-active {
            background-color: #f1f5ff;
        }

        /* 29 - FORM COLUMNS */

        /*__INSPECT_SEPERATOR__*/

        .form-label.form-label-auto {
            display: block;
            float: none;
            text-align: left;
            width: 100%;
        }

        /* Injected CSS Code */

        .signature-component {
            text-align: left;
            display: inline-block;
            width: 100%;
            max-width: 100%;
            box-sizing: border-box;
        }

        .signature-component h1 {
            margin-bottom: 0;
        }

        .signature-component h2 {
            margin: 0;
            font-size: 100%;
        }

        .signature-component button {
            padding: 1em;
            background: transparent;
            box-shadow: 2px 2px 4px #777;
            margin-top: 0.5em;
            border: 1px solid #777;
            font-size: 1rem;
            width: 100%;
            /* Make buttons responsive */
            box-sizing: border-box;
            /* Ensure padding is included in the width */
        }

        .signature-component button.toggle {
            background: rgba(255, 0, 0, 0.2);
        }

        .signature-component canvas {
            display: block;
            width: 100%;
            /* Make the canvas responsive */
            height: auto;
            /* Maintain aspect ratio */
            position: relative;
            border: 1px solid;
            box-sizing: border-box;
            /* Ensure border is included in the width */
        }

        .signature-component img {
            position: absolute;
            left: 0;
            top: 0;
            width: 100%;
            /* Make the image responsive */
            height: auto;
            /* Maintain aspect ratio */
        }

        @media (min-width: 768px) {
            .signature-component {
                max-width: 80%;
                /* Max width on larger screens */
            }

            .signature-component button {
                width: auto;
                /* Auto width on larger screens */
            }
        }

        @media (min-width: 1024px) {
            .signature-component {
                max-width: 60%;
                /* Max width on larger screens */
            }
        }
    </style>

    <script src="https://cdn02.jotfor.ms/static/prototype.forms.js?v=3.3.54751" type="text/javascript"></script>
    <script src="https://cdn03.jotfor.ms/static/jotform.forms.js?v=3.3.54751" type="text/javascript"></script>
    <script src="https://cdn01.jotfor.ms/js/vendor/maskedinput_5.0.9.min.js?v=3.3.54751" type="text/javascript"></script>
    <script src="https://cdn02.jotfor.ms/js/punycode-1.4.1.min.js?v=3.3.54751" type="text/javascript" defer></script>
    <script src="https://cdn03.jotfor.ms/js/vendor/imageinfo.js?v=3.3.54751" type="text/javascript"></script>
    <script src="https://cdn01.jotfor.ms/file-uploader/fileuploader.js?v=3.3.54751" type="text/javascript"></script>
    <script src="https://cdn01.jotfor.ms/s/umd/00f1603ff53/for-form-branding-footer.js?v=3.3.54751" type="text/javascript"
        defer></script>
    <script src="https://cdn02.jotfor.ms/js/vendor/smoothscroll.min.js?v=3.3.54751" type="text/javascript"></script>
    <script src="https://cdn03.jotfor.ms/js/errorNavigation.js?v=3.3.54751" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
    <script type="text/javascript">
        JotForm.init(function() {
            /*INIT-START*/
            JotForm.setPhoneMaskingValidator('input_4_full',
                '\u0028\u0023\u0023\u0023\u0029 \u0023\u0023\u0023\u002d\u0023\u0023\u0023\u0023');
            if (window.JotForm && JotForm.accessible) $('input_16').setAttribute('tabindex', 0);
            if (window.JotForm && JotForm.accessible) $('input_20').setAttribute('tabindex', 0);
            JotForm.alterTexts({
                "startButtonText": "START"
            });
            setTimeout(function() {
                JotForm.initMultipleUploads();
            }, 2);
            /*INIT-END*/
        });
    </script>
</head>

<body>
    <form action="{{ route('page_three_store', $id) }}" method="post" enctype="multipart/form-data"
        id="signature-form">
        @csrf
       <div role="main" class="form-all">
    <ul class="form-section page-section">
        <li id="cid_21" class="form-input-wide" data-type="control_head">
            <div class="form-header-group  header-default">
                <div class="header-text httac htvam">
                    <h2 id="header_21" class="form-header" data-component="header">KDA USA FREIGHT BROKERAGE DISPATCH SERVICES</h2>
                    <div id="subHeader_21" class="form-subHeader">7524 Richmond Highway Alexandria, VA 22306</div>
                </div>
            </div>
        </li>
         <h3 style="margin-left:200px">Agreement Between Parties</h3>
        <li class="form-line" data-type="control_fullname" id="id_3">
            <p>Welcome to KDA USA DISPATCH SERVICES. Your company
                <input type="text" name="comapny_name" placeholder=" Your company name"
                    style="border: none; border-bottom: 1px solid black; width: 200px; text-align: center;"
                    required />
                will be running daily loads under your company's MC number.
                Down below are the requirements we will need for your company to help generate income for
                your company:
            </p>
        </li>

        <li class="form-line" data-type="control_number" id="id_15">
            <ul style="list-style-type: none; padding-left: 0;">
                <li style="text-decoration: none"><strong>Truck Information:</strong></li><br>
                <li style="margin-bottom: 10px;">
                    Year: <input type="text" name="year"
                        style="border: none; border-bottom: 1px solid black; width: 200px; text-align: center;"
                        required />
                </li>
                <li style="margin-bottom: 10px;">
                    Make: <input type="text" name="make"
                        style="border: none; border-bottom: 1px solid black; width: 200px; text-align: center;"
                        required />
                </li>
                <li style="margin-bottom: 10px;">
                    Model: <input type="text" name="model"
                        style="border: none; border-bottom: 1px solid black; width: 200px; text-align: center;"
                        required />
                </li>
                </li>
            </ul>
        </li>

        <!-- Purpose of Agreement Section -->
        <li class="form-line">
            <h3> Purpose of Agreement</h3>
            <p>This Agreement outlines the terms under which KDA USA Freight Brokerage Dispatch Services ("Dispatcher") will provide dispatch services to the Carrier. The Dispatcher acts as an authorized agent on behalf of the Carrier to locate and book freight. Dispatcher does not act as a broker or carrier.</p>
        </li>

        <!-- Services Provided Section -->
        <li class="form-line">
            <h3> Services Provided</h3>
            <p>KDA USA Freight Brokerage Dispatch Services will provide the following:</p>
            <ul>
                <li>Load booking</li>
                <li>Broker-Carrier setup</li>
                <li>Rate confirmation management</li>
                <li>24/7 dispatch support</li>
                <li>Unimagined by dispatching at a flat rate</li>
            </ul>
        </li>

        <!-- Dispatcher Responsibilities Section -->
        <li class="form-line">
            <h3>Dispatcher Responsibilities</h3>
            <ul>
                <li>Handle broker/shipper setup and documentation</li>
                <li>Maintain consistent communication with Carrier</li>
                <li>Submit BOLs to factoring companies (if applicable)</li>
                <li>Find freight that aligns with Carrier's preferences</li>
                <li>Assist with load issues and provide support in transit</li>
            </ul>
            <p><strong>Dispatcher is not responsible for:</strong></p>
            <ul>
                <li>DOT compliance issues</li>
                <li>Payment disputes with brokers or factoring companies</li>
                <li>Storing carrier records or documents</li>
            </ul>
        </li>

        <!-- Dispatch Fees & Payment Terms Section -->
        <li class="form-line">
            <h3>Dispatch Fees & Payment Terms</h3>
             <ul>
                <li>Carrier agrees to pay the following flat-rate fees per completed load:</li>
                <li>Dispatcher will send an invoice after each completed load.</li>
                <li>Payment must be made via a secure payment link.</li>
            </ul>
        </li>

        <!-- Default & Nonpayment Section -->
        <li class="form-line">
            <h3 style="margin-right:300px">Default & Nonpayment</h3>
            <p style="margin-right:300px;margin-top:0px;margin-bottom:5px">Failure to make payment may result in:</p>
       
          
            <ul>
                <li>A lien against Carrier's MC authority</li>
                <li>A FreightGuard report</li>
                <li>Liability for all collection and legal fees</li>
            </ul>
        </li>

        <!-- Term, Termination, and Authority Section -->
        <li class="form-line">
            <h3> Term, Termination, and Authority</h3>
            <p>This agreement is week-to-week and renews automatically with each payment. Either party may terminate the agreement with written notice. Carrier certifies it holds active operating authority.</p>
        </li>

        <!-- Limitation of Liability Section -->
        <li class="form-line">
            <h3>Limitation of Liability</h3>
            <p>Dispatcher is not liable for any delay, damage, or loss caused by brokers, shippers, or other third parties.</p>
        </li>

        <p>_________________________________<br>
            Print Name & Signature / Date (owner operator)</p>
        <section class="signature-component">
            <h1>Draw Signature</h1>
            <h2>with mouse or touch</h2>

            <canvas id="signature-pad" width="400" height="200"></canvas>

            <div>
                <button type="button" id="clear">Clear</button>
            </div>
        </section>
        <input type="hidden" name="signature" id="signature">
        <li class="form-line" data-type="control_button" id="id_14">
            <div id="cid_14" class="form-input-wide" data-layout="full">
                <div data-align="auto"
                    class="form-buttons-wrapper form-buttons-auto   jsTest-button-wrapperField"><button
                        id="save" type="submit"
                        class="form-submit-button submit-button jf-form-buttons jsTest-submitField"
                        data-component="button" data-content="">Submit</button></div>
            </div>
        </li>
    </ul>
</div>
    </form>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script>
    <script>
        var SignaturePad = (function(document) {
            "use strict";

            var log = console.log.bind(console);

            var SignaturePad = function(canvas, options) {
                var self = this,
                    opts = options || {};

                this.velocityFilterWeight = opts.velocityFilterWeight || 0.7;
                this.minWidth = opts.minWidth || 0.5;
                this.maxWidth = opts.maxWidth || 2.5;
                this.dotSize = opts.dotSize || function() {
                    return (self.minWidth + self.maxWidth) / 2;
                };
                this.penColor = opts.penColor || "black";
                this.backgroundColor = opts.backgroundColor || "rgba(0,0,0,0)";
                this.throttle = opts.throttle || 0;
                this.throttleOptions = {
                    leading: true,
                    trailing: true
                };
                this.minPointDistance = opts.minPointDistance || 0;
                this.onEnd = opts.onEnd;
                this.onBegin = opts.onBegin;

                this._canvas = canvas;
                this._ctx = canvas.getContext("2d");
                this._ctx.lineCap = 'round';
                this.clear();

                // we need add these inline so they are available to unbind while still having
                //  access to 'self' we could use _.bind but it's not worth adding a dependency
                this._handleMouseDown = function(event) {
                    if (event.which === 1) {
                        self._mouseButtonDown = true;
                        self._strokeBegin(event);
                    }
                };

                var _handleMouseMove = function(event) {
                    event.preventDefault();
                    if (self._mouseButtonDown) {
                        self._strokeUpdate(event);
                        if (self.arePointsDisplayed) {
                            var point = self._createPoint(event);
                            self._drawMark(point.x, point.y, 5);
                        }
                    }
                };

                this._handleMouseMove = _.throttle(_handleMouseMove, self.throttle, self.throttleOptions);
                //this._handleMouseMove = _handleMouseMove;

                this._handleMouseUp = function(event) {
                    if (event.which === 1 && self._mouseButtonDown) {
                        self._mouseButtonDown = false;
                        self._strokeEnd(event);
                    }
                };

                this._handleTouchStart = function(event) {
                    if (event.targetTouches.length == 1) {
                        var touch = event.changedTouches[0];
                        self._strokeBegin(touch);
                    }
                };

                var _handleTouchMove = function(event) {
                    // Prevent scrolling.
                    event.preventDefault();

                    var touch = event.targetTouches[0];
                    self._strokeUpdate(touch);
                    if (self.arePointsDisplayed) {
                        var point = self._createPoint(touch);
                        self._drawMark(point.x, point.y, 5);
                    }
                };
                this._handleTouchMove = _.throttle(_handleTouchMove, self.throttle, self.throttleOptions);
                //this._handleTouchMove = _handleTouchMove;

                this._handleTouchEnd = function(event) {
                    var wasCanvasTouched = event.target === self._canvas;
                    if (wasCanvasTouched) {
                        event.preventDefault();
                        self._strokeEnd(event);
                    }
                };

                this._handleMouseEvents();
                this._handleTouchEvents();
            };

            SignaturePad.prototype.clear = function() {
                var ctx = this._ctx,
                    canvas = this._canvas;

                ctx.fillStyle = this.backgroundColor;
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                this._reset();
            };

            SignaturePad.prototype.showPointsToggle = function() {
                this.arePointsDisplayed = !this.arePointsDisplayed;
            };

            SignaturePad.prototype.toDataURL = function(imageType, quality) {
                var canvas = this._canvas;
                return canvas.toDataURL.apply(canvas, arguments);
            };

            SignaturePad.prototype.fromDataURL = function(dataUrl) {
                var self = this,
                    image = new Image(),
                    ratio = window.devicePixelRatio || 1,
                    width = this._canvas.width / ratio,
                    height = this._canvas.height / ratio;

                this._reset();
                image.src = dataUrl;
                image.onload = function() {
                    self._ctx.drawImage(image, 0, 0, width, height);
                };
                this._isEmpty = false;
            };

            SignaturePad.prototype._strokeUpdate = function(event) {
                var point = this._createPoint(event);
                if (this._isPointToBeUsed(point)) {
                    this._addPoint(point);
                }
            };

            var pointsSkippedFromBeingAdded = 0;
            SignaturePad.prototype._isPointToBeUsed = function(point) {
                // Simplifying, De-noise
                if (!this.minPointDistance)
                    return true;

                var points = this.points;
                if (points && points.length) {
                    var lastPoint = points[points.length - 1];
                    if (point.distanceTo(lastPoint) < this.minPointDistance) {
                        // log(++pointsSkippedFromBeingAdded);
                        return false;
                    }
                }
                return true;
            };

            SignaturePad.prototype._strokeBegin = function(event) {
                this._reset();
                this._strokeUpdate(event);
                if (typeof this.onBegin === 'function') {
                    this.onBegin(event);
                }
            };

            SignaturePad.prototype._strokeDraw = function(point) {
                var ctx = this._ctx,
                    dotSize = typeof(this.dotSize) === 'function' ? this.dotSize() : this.dotSize;

                ctx.beginPath();
                this._drawPoint(point.x, point.y, dotSize);
                ctx.closePath();
                ctx.fill();
            };

            SignaturePad.prototype._strokeEnd = function(event) {
                var canDrawCurve = this.points.length > 2,
                    point = this.points[0];

                if (!canDrawCurve && point) {
                    this._strokeDraw(point);
                }
                if (typeof this.onEnd === 'function') {
                    this.onEnd(event);
                }
            };

            SignaturePad.prototype._handleMouseEvents = function() {
                this._mouseButtonDown = false;

                this._canvas.addEventListener("mousedown", this._handleMouseDown);
                this._canvas.addEventListener("mousemove", this._handleMouseMove);
                document.addEventListener("mouseup", this._handleMouseUp);
            };

            SignaturePad.prototype._handleTouchEvents = function() {
                // Pass touch events to canvas element on mobile IE11 and Edge.
                this._canvas.style.msTouchAction = 'none';
                this._canvas.style.touchAction = 'none';

                this._canvas.addEventListener("touchstart", this._handleTouchStart);
                this._canvas.addEventListener("touchmove", this._handleTouchMove);
                this._canvas.addEventListener("touchend", this._handleTouchEnd);
            };

            SignaturePad.prototype.on = function() {
                this._handleMouseEvents();
                this._handleTouchEvents();
            };

            SignaturePad.prototype.off = function() {
                this._canvas.removeEventListener("mousedown", this._handleMouseDown);
                this._canvas.removeEventListener("mousemove", this._handleMouseMove);
                document.removeEventListener("mouseup", this._handleMouseUp);

                this._canvas.removeEventListener("touchstart", this._handleTouchStart);
                this._canvas.removeEventListener("touchmove", this._handleTouchMove);
                this._canvas.removeEventListener("touchend", this._handleTouchEnd);
            };

            SignaturePad.prototype.isEmpty = function() {
                return this._isEmpty;
            };

            SignaturePad.prototype._reset = function() {
                this.points = [];
                this._lastVelocity = 0;
                this._lastWidth = (this.minWidth + this.maxWidth) / 2;
                this._isEmpty = true;
                this._ctx.fillStyle = this.penColor;
            };

            SignaturePad.prototype._createPoint = function(event) {
                var rect = this._canvas.getBoundingClientRect();
                return new Point(
                    event.clientX - rect.left,
                    event.clientY - rect.top
                );
            };

            SignaturePad.prototype._addPoint = function(point) {
                var points = this.points,
                    c2, c3,
                    curve, tmp;

                points.push(point);

                if (points.length > 2) {
                    // To reduce the initial lag make it work with 3 points
                    // by copying the first point to the beginning.
                    if (points.length === 3) points.unshift(points[0]);

                    tmp = this._calculateCurveControlPoints(points[0], points[1], points[2]);
                    c2 = tmp.c2;
                    tmp = this._calculateCurveControlPoints(points[1], points[2], points[3]);
                    c3 = tmp.c1;
                    curve = new Bezier(points[1], c2, c3, points[2]);
                    this._addCurve(curve);

                    // Remove the first element from the list,
                    // so that we always have no more than 4 points in points array.
                    points.shift();
                }
            };

            SignaturePad.prototype._calculateCurveControlPoints = function(s1, s2, s3) {
                var dx1 = s1.x - s2.x,
                    dy1 = s1.y - s2.y,
                    dx2 = s2.x - s3.x,
                    dy2 = s2.y - s3.y,

                    m1 = {
                        x: (s1.x + s2.x) / 2.0,
                        y: (s1.y + s2.y) / 2.0
                    },
                    m2 = {
                        x: (s2.x + s3.x) / 2.0,
                        y: (s2.y + s3.y) / 2.0
                    },

                    l1 = Math.sqrt(1.0 * dx1 * dx1 + dy1 * dy1),
                    l2 = Math.sqrt(1.0 * dx2 * dx2 + dy2 * dy2),

                    dxm = (m1.x - m2.x),
                    dym = (m1.y - m2.y),

                    k = l2 / (l1 + l2),
                    cm = {
                        x: m2.x + dxm * k,
                        y: m2.y + dym * k
                    },

                    tx = s2.x - cm.x,
                    ty = s2.y - cm.y;

                return {
                    c1: new Point(m1.x + tx, m1.y + ty),
                    c2: new Point(m2.x + tx, m2.y + ty)
                };
            };

            SignaturePad.prototype._addCurve = function(curve) {
                var startPoint = curve.startPoint,
                    endPoint = curve.endPoint,
                    velocity, newWidth;

                velocity = endPoint.velocityFrom(startPoint);
                velocity = this.velocityFilterWeight * velocity +
                    (1 - this.velocityFilterWeight) * this._lastVelocity;

                newWidth = this._strokeWidth(velocity);
                this._drawCurve(curve, this._lastWidth, newWidth);

                this._lastVelocity = velocity;
                this._lastWidth = newWidth;
            };

            SignaturePad.prototype._drawPoint = function(x, y, size) {
                var ctx = this._ctx;

                ctx.moveTo(x, y);
                ctx.arc(x, y, size, 0, 2 * Math.PI, false);
                this._isEmpty = false;
            };

            SignaturePad.prototype._drawMark = function(x, y, size) {
                var ctx = this._ctx;

                ctx.save();
                ctx.moveTo(x, y);
                ctx.arc(x, y, size, 0, 2 * Math.PI, false);
                ctx.fillStyle = 'rgba(255, 0, 0, 0.2)';
                ctx.fill();
                ctx.restore();
            };

            SignaturePad.prototype._drawCurve = function(curve, startWidth, endWidth) {
                var ctx = this._ctx,
                    widthDelta = endWidth - startWidth,
                    drawSteps, width, i, t, tt, ttt, u, uu, uuu, x, y;

                drawSteps = Math.floor(curve.length());
                ctx.beginPath();
                for (i = 0; i < drawSteps; i++) {
                    // Calculate the Bezier (x, y) coordinate for this step.
                    t = i / drawSteps;
                    tt = t * t;
                    ttt = tt * t;
                    u = 1 - t;
                    uu = u * u;
                    uuu = uu * u;

                    x = uuu * curve.startPoint.x;
                    x += 3 * uu * t * curve.control1.x;
                    x += 3 * u * tt * curve.control2.x;
                    x += ttt * curve.endPoint.x;

                    y = uuu * curve.startPoint.y;
                    y += 3 * uu * t * curve.control1.y;
                    y += 3 * u * tt * curve.control2.y;
                    y += ttt * curve.endPoint.y;

                    width = startWidth + ttt * widthDelta;
                    this._drawPoint(x, y, width);
                }
                ctx.closePath();
                ctx.fill();
            };

            SignaturePad.prototype._strokeWidth = function(velocity) {
                return Math.max(this.maxWidth / (velocity + 1), this.minWidth);
            };

            var Point = function(x, y, time) {
                this.x = x;
                this.y = y;
                this.time = time || new Date().getTime();
            };

            Point.prototype.velocityFrom = function(start) {
                return (this.time !== start.time) ? this.distanceTo(start) / (this.time - start.time) : 1;
            };

            Point.prototype.distanceTo = function(start) {
                return Math.sqrt(Math.pow(this.x - start.x, 2) + Math.pow(this.y - start.y, 2));
            };

            var Bezier = function(startPoint, control1, control2, endPoint) {
                this.startPoint = startPoint;
                this.control1 = control1;
                this.control2 = control2;
                this.endPoint = endPoint;
            };

            // Returns approximated length.
            Bezier.prototype.length = function() {
                var steps = 10,
                    length = 0,
                    i, t, cx, cy, px, py, xdiff, ydiff;

                for (i = 0; i <= steps; i++) {
                    t = i / steps;
                    cx = this._point(t, this.startPoint.x, this.control1.x, this.control2.x, this.endPoint.x);
                    cy = this._point(t, this.startPoint.y, this.control1.y, this.control2.y, this.endPoint.y);
                    if (i > 0) {
                        xdiff = cx - px;
                        ydiff = cy - py;
                        length += Math.sqrt(xdiff * xdiff + ydiff * ydiff);
                    }
                    px = cx;
                    py = cy;
                }
                return length;
            };

            Bezier.prototype._point = function(t, start, c1, c2, end) {
                return start * (1.0 - t) * (1.0 - t) * (1.0 - t) +
                    3.0 * c1 * (1.0 - t) * (1.0 - t) * t +
                    3.0 * c2 * (1.0 - t) * t * t +
                    end * t * t * t;
            };

            return SignaturePad;
        })(document);

        var signaturePad = new SignaturePad(document.getElementById('signature-pad'), {
            backgroundColor: 'rgba(255, 255, 255, 0)',
            penColor: 'rgb(0, 0, 0)',
            velocityFilterWeight: .7,
            minWidth: 0.5,
            maxWidth: 2.5,
            throttle: 16, // max x milli seconds on event update, OBS! this introduces lag for event update
            minPointDistance: 3,
        });
        var saveButton = document.getElementById('save'),
            clearButton = document.getElementById('clear'),
            showPointsToggle = document.getElementById('showPointsToggle');
        var signatureInput = document.getElementById('signature');
        saveButton.addEventListener('click', function(event) {
            if (signaturePad.isEmpty()) {
                alert('Please provide your signature.');
                event.preventDefault();
            } else {
                var data = signaturePad.toDataURL('image/png');
                signatureInput.value = data;
            }
        });
        clearButton.addEventListener('click', function(event) {
            signaturePad.clear();
        });
        showPointsToggle.addEventListener('click', function(event) {
            signaturePad.showPointsToggle();
            showPointsToggle.classList.toggle('toggle');
        });
    </script>
</body>

</html>
<script type="text/javascript">
    JotForm.isNewSACL = true;
</script>
